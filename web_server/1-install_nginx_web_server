#!/usr/bin/env bash
# Script installs Nginx web server and sets up basic configuration

# Update package index and install Nginx
sudo apt-get update
sudo apt-get install -y nginx

# Check if Nginx installation was successful
if ! [ -x "$(command -v nginx)" ]; then
  echo 'Error: Nginx is not installed.' >&2
  exit 1
fi

# Create a basic HTML file with required content
echo "Holberton School for the win!" | sudo tee /var/www/html/index.html > /dev/null

# Check if index.html was created
if ! [ -f /var/www/html/index.html ]; then
  echo 'Error: Failed to create index.html.' >&2
  exit 1
fi

# Restart Nginx without using systemctl
sudo service nginx restart

# Check if Nginx restarted successfully
nginx_status=$(sudo service nginx status)
if ! echo "$nginx_status" | grep -q "active (running)"; then
  echo 'Error: Nginx failed to restart.' >&2
  exit 1
fi

exit 0


